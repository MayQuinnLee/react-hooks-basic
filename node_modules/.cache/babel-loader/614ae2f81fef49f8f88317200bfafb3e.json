{"ast":null,"code":"import { useReducer, useCallback } from 'react'; // outside of functional component, do not need a re-render on every call\n\nconst httpReducer = (curHttpState, action) => {\n  switch (action.type) {\n    case 'SEND':\n      return {\n        loading: true,\n        error: null,\n        data: null,\n        extra: action.extra\n      };\n\n    case 'RESPONSE':\n      return { ...curHttpState,\n        loading: false,\n        data: action.responseData\n      };\n\n    case 'ERROR':\n      return {\n        loading: false,\n        error: action.errorMessage\n      };\n\n    case 'CLEAR':\n      return {\n        error: null\n      };\n\n    default:\n      throw new Error('You should not get here');\n  }\n}; //you can use stateful/ any hooks feature in this custom hook\n\n\nconst useHttp = () => {\n  const [httpState, dispatchHttp] = useReducer(httpReducer, {\n    loading: false,\n    error: null,\n    data: null,\n    extra: null\n  }); // to avoid http request from re-rending on every functional component call, create a new function for http request, only then when the function is call, the code will run\n\n  const sendRequest = useCallback((url, method, body, extra) => {\n    dispatchHttp({\n      type: 'SEND',\n      extra: extra\n    });\n    fetch(url, {\n      method: method,\n      body: body,\n      header: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      return response.json();\n    }).then(responseData => {\n      dispatchHttp({\n        type: 'RESPONSE',\n        responseData: responseData\n      });\n    }).catch(err => {\n      dispatchHttp({\n        type: 'ERROR',\n        errorMessage: err.message\n      });\n    });\n  }, []);\n  return {\n    isLoading: httpState.loading,\n    error: httpState.error,\n    data: httpState.data,\n    extra: httpState.error,\n    sendRequest: sendRequest\n  };\n}; //all hooks can return something\n\n\nexport default useHttp;","map":{"version":3,"sources":["/Users/jovangoh/Desktop/react-hooks-basic/src/hooks/http.js"],"names":["useReducer","useCallback","httpReducer","curHttpState","action","type","loading","error","data","extra","responseData","errorMessage","Error","useHttp","httpState","dispatchHttp","sendRequest","url","method","body","fetch","header","then","response","json","catch","err","message","isLoading"],"mappings":"AAAA,SAAQA,UAAR,EAAoBC,WAApB,QAAsC,OAAtC,C,CAEA;;AACA,MAAMC,WAAW,GAAG,CAACC,YAAD,EAAeC,MAAf,KAA0B;AAC1C,UAAOA,MAAM,CAACC,IAAd;AACE,SAAK,MAAL;AACE,aAAO;AAACC,QAAAA,OAAO,EAAE,IAAV;AAAgBC,QAAAA,KAAK,EAAE,IAAvB;AAA6BC,QAAAA,IAAI,EAAE,IAAnC;AAAyCC,QAAAA,KAAK,EAAEL,MAAM,CAACK;AAAvD,OAAP;;AACF,SAAK,UAAL;AACE,aAAO,EAAC,GAAGN,YAAJ;AAAkBG,QAAAA,OAAO,EAAE,KAA3B;AAAkCE,QAAAA,IAAI,EAAEJ,MAAM,CAACM;AAA/C,OAAP;;AACF,SAAK,OAAL;AACE,aAAO;AAACJ,QAAAA,OAAO,EAAE,KAAV;AAAiBC,QAAAA,KAAK,EAAEH,MAAM,CAACO;AAA/B,OAAP;;AACF,SAAK,OAAL;AACE,aAAM;AAACJ,QAAAA,KAAK,EAAE;AAAR,OAAN;;AACF;AAAS,YAAM,IAAIK,KAAJ,CAAU,yBAAV,CAAN;AATX;AAWD,CAZH,C,CAcA;;;AACA,MAAMC,OAAO,GAAG,MAAM;AAClB,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bf,UAAU,CAACE,WAAD,EAAc;AACtDI,IAAAA,OAAO,EAAE,KAD6C;AACtCC,IAAAA,KAAK,EAAE,IAD+B;AACzBC,IAAAA,IAAI,EAAE,IADmB;AACbC,IAAAA,KAAK,EAAE;AADM,GAAd,CAA5C,CADkB,CAKlB;;AACA,QAAMO,WAAW,GAAGf,WAAW,CAAC,CAACgB,GAAD,EAAMC,MAAN,EAAcC,IAAd,EAAoBV,KAApB,KAA8B;AAC1DM,IAAAA,YAAY,CAAC;AAACV,MAAAA,IAAI,EAAE,MAAP;AAAeI,MAAAA,KAAK,EAAEA;AAAtB,KAAD,CAAZ;AACAW,IAAAA,KAAK,CAACH,GAAD,EAAM;AACXC,MAAAA,MAAM,EAAEA,MADG;AAEXC,MAAAA,IAAI,EAAEA,IAFK;AAGXE,MAAAA,MAAM,EAAE;AAAC,wBAAgB;AAAjB;AAHG,KAAN,CAAL,CAIGC,IAJH,CAIQC,QAAQ,IAAI;AAChB,aAAOA,QAAQ,CAACC,IAAT,EAAP;AACH,KAND,EAMGF,IANH,CAMQZ,YAAY,IAAG;AACnBK,MAAAA,YAAY,CAAC;AAACV,QAAAA,IAAI,EAAE,UAAP;AAAmBK,QAAAA,YAAY,EAAEA;AAAjC,OAAD,CAAZ;AACH,KARD,EAQGe,KARH,CAQSC,GAAG,IAAG;AACXX,MAAAA,YAAY,CAAC;AAACV,QAAAA,IAAI,EAAC,OAAN;AAAeM,QAAAA,YAAY,EAACe,GAAG,CAACC;AAAhC,OAAD,CAAZ;AACH,KAVD;AAWH,GAb8B,EAa5B,EAb4B,CAA/B;AAeA,SAAO;AACHC,IAAAA,SAAS,EAAEd,SAAS,CAACR,OADlB;AAEHC,IAAAA,KAAK,EAAEO,SAAS,CAACP,KAFd;AAGHC,IAAAA,IAAI,EAAEM,SAAS,CAACN,IAHb;AAIHC,IAAAA,KAAK,EAAEK,SAAS,CAACP,KAJd;AAKHS,IAAAA,WAAW,EAAEA;AALV,GAAP;AAOH,CA5BD,C,CA8BI;;;AACJ,eAAeH,OAAf","sourcesContent":["import {useReducer, useCallback} from 'react';\n\n// outside of functional component, do not need a re-render on every call\nconst httpReducer = (curHttpState, action) => {\n    switch(action.type){\n      case 'SEND':\n        return {loading: true, error: null, data: null, extra: action.extra};\n      case 'RESPONSE':\n        return {...curHttpState, loading: false, data: action.responseData};\n      case 'ERROR': \n        return {loading: false, error: action.errorMessage};\n      case 'CLEAR':\n        return{error: null};\n      default: throw new Error('You should not get here')\n    }\n  }\n\n//you can use stateful/ any hooks feature in this custom hook\nconst useHttp = () => {\n    const [httpState, dispatchHttp] = useReducer(httpReducer, {\n        loading: false, error: null, data: null, extra: null});\n\n\n    // to avoid http request from re-rending on every functional component call, create a new function for http request, only then when the function is call, the code will run\n    const sendRequest = useCallback((url, method, body, extra) => {\n        dispatchHttp({type: 'SEND', extra: extra});\n        fetch(url, { \n        method: method,\n        body: body,\n        header: {'Content-Type': 'application/json'}\n        }).then(response => {\n            return response.json()\n        }).then(responseData=> {\n            dispatchHttp({type: 'RESPONSE', responseData: responseData});\n        }).catch(err=> {\n            dispatchHttp({type:'ERROR', errorMessage:err.message});\n        })\n    } ,[]);\n    \n    return {\n        isLoading: httpState.loading,\n        error: httpState.error,\n        data: httpState.data,\n        extra: httpState.error,\n        sendRequest: sendRequest\n    };\n};\n\n    //all hooks can return something\nexport default useHttp;"]},"metadata":{},"sourceType":"module"}