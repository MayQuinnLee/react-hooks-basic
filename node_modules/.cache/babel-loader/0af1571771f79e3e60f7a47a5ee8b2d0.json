{"ast":null,"code":"import { useReducer, useCallback } from 'react';\nconst initialState = {\n  loading: false,\n  error: null,\n  data: null,\n  extra: null,\n  identifier: null\n}; // outside of functional component, do not need a re-render on every call\n\nconst httpReducer = (curHttpState, action) => {\n  switch (action.type) {\n    case 'SEND':\n      return {\n        loading: true,\n        error: null,\n        data: null,\n        extra: null,\n        identifier: action.identifier\n      };\n\n    case 'RESPONSE':\n      return { ...curHttpState,\n        loading: false,\n        data: action.responseData,\n        extra: action.extra\n      };\n\n    case 'ERROR':\n      return {\n        loading: false,\n        error: action.errorMessage\n      };\n\n    case 'CLEAR':\n      return initialState;\n\n    default:\n      throw new Error('You should not get here');\n  }\n}; //you can use stateful/ any hooks feature in this custom hook\n\n\nconst useHttp = () => {\n  const [httpState, dispatchHttp] = useReducer(httpReducer, initialState);\n  const clear = useCallback(() => dispatchHttp({\n    type: 'CLEAR'\n  }), []); // to avoid http request from re-rending on every functional component call, create a new function for http request, only then when the function is call, the code will run\n\n  const sendRequest = useCallback((url, method, body, reqExtra, reqIdentifier) => {\n    dispatchHttp({\n      type: 'SEND',\n      identifier: reqIdentifier\n    });\n    fetch(url, {\n      method: method,\n      body: body,\n      header: {\n        'Content-Type': 'application/json'\n      }\n    }).then(response => {\n      return response.json();\n    }).then(responseData => {\n      dispatchHttp({\n        type: 'RESPONSE',\n        responseData: responseData,\n        extra: reqExtra\n      });\n    }).catch(err => {\n      dispatchHttp({\n        type: 'ERROR',\n        errorMessage: err.message\n      });\n    });\n  }, []);\n  return {\n    isLoading: httpState.loading,\n    error: httpState.error,\n    data: httpState.data,\n    reqExtra: httpState.extra,\n    reqIdentifier: httpState.identifier,\n    sendRequest: sendRequest,\n    clear: clear\n  };\n}; //all hooks can return something\n\n\nexport default useHttp;","map":{"version":3,"sources":["/Users/jovangoh/Desktop/react-hooks-basic/src/hooks/http.js"],"names":["useReducer","useCallback","initialState","loading","error","data","extra","identifier","httpReducer","curHttpState","action","type","responseData","errorMessage","Error","useHttp","httpState","dispatchHttp","clear","sendRequest","url","method","body","reqExtra","reqIdentifier","fetch","header","then","response","json","catch","err","message","isLoading"],"mappings":"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","sourcesContent":["import {useReducer, useCallback} from 'react';\n\nconst initialState = {\n    loading: false, error: null, data: null, extra: null, identifier: null\n};\n\n// outside of functional component, do not need a re-render on every call\nconst httpReducer = (curHttpState, action) => {\n    switch(action.type){\n      case 'SEND':\n        return {loading: true, error: null, data: null, extra: null, identifier: action.identifier};\n      case 'RESPONSE':\n        return {...curHttpState, loading: false, data: action.responseData, extra: action.extra}; \n      case 'ERROR': \n        return {loading: false, error: action.errorMessage};\n      case 'CLEAR':\n        return initialState;\n      default: throw new Error('You should not get here')\n    }\n  }\n\n//you can use stateful/ any hooks feature in this custom hook\nconst useHttp = () => {\n    const [httpState, dispatchHttp] = useReducer(httpReducer, initialState);\n\n    const clear = useCallback(() => dispatchHttp({type: 'CLEAR'}), []);\n\n\n    // to avoid http request from re-rending on every functional component call, create a new function for http request, only then when the function is call, the code will run\n    const sendRequest = useCallback(\n        (url, method, body, reqExtra, reqIdentifier) => {\n            dispatchHttp({type: 'SEND', identifier: reqIdentifier});\n            fetch(url, { \n            method: method,\n            body: body,\n            header: {'Content-Type': 'application/json'}\n            }).then(response => {\n                return response.json()\n            }).then(responseData=> {\n                dispatchHttp({type: 'RESPONSE', responseData: responseData, extra: reqExtra});\n            }).catch(err=> {\n                dispatchHttp({type:'ERROR', errorMessage:err.message});\n            })\n        }, []\n    );\n    \n    return {\n        isLoading: httpState.loading,\n        error: httpState.error,\n        data: httpState.data,\n        reqExtra: httpState.extra,\n        reqIdentifier: httpState.identifier,\n        sendRequest: sendRequest,\n        clear: clear\n    };\n};\n\n    //all hooks can return something\nexport default useHttp;"]},"metadata":{},"sourceType":"module"}